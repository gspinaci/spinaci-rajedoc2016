<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script>window.$ = window.jQuery = require('./js/jquery.min.js');</script>
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/rash.css" />
    <link rel="stylesheet" href="css/font-awesome.min.css" />
    <link rel="stylesheet" href="css/rash-inline.css" />
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/rash.js"></script>
    <script src="js/raje.js"></script>
    <script src="js/libs/mousetrap.min.js"></script>
    <script src="js/libs/rangy-core.js"></script>
    <script src="js/libs/rangy-textrange.js"></script>
    <script src="js/libs/rangy-selectionsaverestore.js"></script>
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    <title>RAJE: RAsh Javascript Editor -- Thesis - Version 0.1.17. 14th March 2017</title>
    <meta about="mailto:gianmarco.spinaci@studio.unibo.it" typeof="schema:Person" property="schema:name" name="dc.creator" content="Gianmarco Spinaci" />
    <meta about="mailto:gianmarco.spinaci@studio.unibo.it" property="schema:email" content="gianmarco.spinaci@studio.unibo.it" />
    <link about="mailto:gianmarco.spinaci@studio.unibo.it" property="schema:affiliation" href="#unibo" />
    <meta about="#unibo" typeof="schema:Organization" property="schema:name" content="Computer Science and management, University of Bologna, Bologna, Italy" />
</head>
<body>
    <section role="doc-abstract">
      <h1>Abstract</h1>
      <p>Anno dopo anno, specialmente per quanto riguarda la comunità del Semantic Web, molti ricercatori, a fronte dei problemi che il formato PDF porta con se (dalla difficoltà ad essere interpretato dai calcolatori all'inaccessibilità per utenti con disabilità visive), hanno iniziato a parlare di "pubblicazione accademica in HTML". Ad oggi alcune conferenze e journal hanno iniziato ad accettare articoli scientifici e paper in questo formato: EKAW, PeerJ e Springer. Uno dei problemi principali di HTML è la sua ampiezza di elementi, che può portare ad ambiguità da parte di due o più elementi visualizzati nello stesso modo, ma semanticamente diversi. RASH è un sotto-insieme di elementi HTML, 32 per la precisione, che si occupano di definire una sintassi chiara e semplice per documenti scientifici in HTML, al fine di, tra le altre cose, eliminare ambiguità tra gli elementi.</p>
      <p>Gli autori e i ricercatori che adottano RASH come formato, sanno che hanno a loro disposizione il framework RASH, che consente di visualizzare, validare e convertire il documento. RASH e il suo framework sono basati sulla più completa libertà da parte degli utenti ad utilizzare i tool che più preferiscono, anche autori che scelgono di creare documenti con altri formati o editor, per esempio Microsoft Word e OpenOffice, sono completamente supportati e coperti dalla conversione in RASH. </p>
      <p>Il normale sviluppo di un articolo RASH, non convertito da altri formati, ad ora avviene tramite text o markup editor, che necessitano di alcune, seppur minime, conoscenze di HTML. Una parte che il framework non è riuscita ancora a coprire è la semplificazione della redazione di un articolo RASH. Questa tesi parla di RAJE che è l'editor WYSIWYG che produce documenti RASH ben formattati e validati, nascondendo la difficoltà e le tecnicità agli utenti. Il documento in output è pronto per essere convertiti in formato TeX e inviati a conferenze, giornali scientifici o workshop. RAJE troverà presto il suo posto all'interno del framework RASH.</p>
    </section>
    <section id="section71">
      <h1>Introduction</h1>
      <p>In this thesis I describe RAJE (acronym for RAsh Javascript Editor), a WYSIWYG (What You See Is What You Get) editor, for writing scholarly article in HTML.. In particular it generates in output a subset of HTML elements called RASH (Research Articles in Semplified HTML). RAJE allows authors to write research papers by means of a user-friendly interface, instead of writing raw markup with a IDE or text editors. In addition it guarantees users the benefits of a word processor combined with the ones given by a HTML-based format which are interactiveness, usability and easiness to be processed by calculators.</p>
      <p>Currently the most used format in publications is PDF, which has strenghts that make it the <em>De Facto standard</em> in document sharing. Among them we can find the hard formatting style, to ensure that every device is able to visualise the file in the way it was created, as is. But PDF has also important problems, which are: the lack of interactivity, its unuptitude of to be shared via web, and the complicated readability by screen readers, to help authors with disabilities.</p>
      <p>In order to create a PDF file, users need to create a document that will be exported as PDF after. These documents are written with an editor or word processor. Microsoft Word and OpenOffice are the most popular word processors. They produce DOC(X) and ODT files, and authors are allowed to export the document in PDF. Another way is using LaTeX i.e. a typesetting format that can be compiled to create the corrispondant PDF file. This method is different because users have to use a markup editor instead of a word-processor like one (there are also WYSIWYG LaTeX editors).</p>
      <p>Recently, expecially inside Semantic Web community, reasearchers started to talk about HTML publication. Publication modes have not changed everywhere, they still accept PDF, but few entities such as PeerJ, EKAW and Springer now accept also HTML articles. The biggest part of HTML articles shared now are generated with online editors. Among them we can find Authorea, Fidus Writer, Dokieli and TinyMCE, that are the most populars.</p>
      <p>RAJE is placed inside the last group, with the difference that it is developed on a format i.e. RASH, and all its framework can comes in aid for handling conversions. Having only a univocal subset of HTML can help a lot with problems such as an unimplemented structural restriction, where same result can be reached with different structures (e.g. <code>&lt;b&gt;lorem&lt;/b&gt;</code> element is different of <code>&lt;span style="font-wight:bold"&gt;lorem&lt;/span&gt;</code>, but they are displayed equal). RAJE will be placed inside the RASH framework. It will come in aid of those authors which do not use other editors but need a tool that help write RASH with an interface, not as raw markup, especially for long documents. The whole project is created using web technologies as HTML, CSS and JavaScript, which is the RAJE's beating heart.</p>
      <p>This thesis is written using RAJE itself. A <em>Task Driven Test</em> was organized with 3 researchers of the deparment of computer science and engineering at Bologna University. This test aims to discover the RAJE usability and inprove test question to do the same a wider population next. The results show difficulties on: editing metadata, find the button to add references (such as reference to images, tables and formulas, bibliographic links and footnotes). The feedbacks given by testers show also that some interface settings are better to be moved in other places, because they are a bit hard to find. The "add a footnote" reference must be moved in a single button in the editor's toolbar. In addition testers have found very useful the mathematical formula editor, maybe with a link to its syntax. All issues are currently under fix.</p>
      <p>The rest of the thesis is organised as follows. In <a href="#section1"> </a>​ i describe the specific context where RAJE operates, and it is useful to grant an outline of how publications work, pros and cons about PDF and EPUB and description of the most popular format and HTML editors. In <a href="#section15"> </a>​ I give few high-level information about what RAJE allows author to do, how interface is arranged and its strenghts such as Github integration and the formulas editor. In <a href="#section22"> </a>​ are wrapped all the low-level descriptions of RAJE. About the technologies and external libraries to develop it, and how I have deployed the whole software for MacOSX, Windows and Linux. In <a href="#section43"> </a>​ I describe the evaluation process: the population background, tasks implementation, development of results and conclusion.</p>
    </section>
    <section id="section1">
      <h1>Literature review</h1>
      <p>Before talking about RAJE I must describe the domain where it operates.</p>
      <p>First of all I introduce the submission workflow <a href="#section54"></a>, for creation, evaluation and publication, and few words about HTML publication. Then I will give an overall about popular editors and formats today, which are mainly PDF and ePub as formats, and the WYSIWYG for what concern the editors. At last I describe the RASH framework, where RAJE will be placed in.</p>
      <section id="section52">
        <h1>Submission workflow<br /></h1>
        <blockquote>
          <p>More than 400 years passed, but the structure which sustain scientific papers is still the same of Galieo Galilei— A. Pepe Authorea<br />Co-Founder.</p>
        </blockquote>

​        <p>This, described below, is the academic submission workflow.<br /></p>
        <p>When a researcher, or a group of them, wants to write a paper to a journal, workshop or conference he/her, first of all, needs an editor. If we are talking about a more than one author, they probably set up a communication link among them, to exchange and share the new changes; To have always the last release. The editor can be a WYSIWYG word processor or a markdown one (that will be described in <a href="#section59"> </a>), and in some case it has a collaboration system directly integrated inside.</p>
        <p>When the article is finally ready, it must be submitted to the conference, answering to the <em>call of papers</em>. Before the deadline only the abstract must be sent, and then the whole article. Only one requirement is asked: the article can be accepted only in PDF format, but sometimes, in few specific conferences also HTML is accepted <a href="#bib19"> </a>. Not only the file format is required, but also the publisher's layout layout (such as LNCS, ACM and others).</p>
        <p>This step can be called <strong>evaluation</strong>. Here a committee of reviewers and conference chairs have to review all submitted articles. Every article can be accepted or rejected, but sometimes changes are required. When a paper is accepted the second phase comes: <strong style="font-size: 12pt;">publication</strong>. Authors, now, have to send an archive containing source code of written paper (e.g. if LaTeX is used, inside the archive can be found .tex markup files) and a the PDF corrispondent document, to the publisher. They will create a new PDF file starting fromthe sent one.</p>
        <section id="section54">
        </section>
        <section id="section62">
          <h1>HTML and publication</h1>
          <p>The main format widely used to submit academic articles is PDF. <em>It usage has many problems</em> (that will belisted after) however the worst one, in this case, is about the difficulty to be read by machines. For this reason the web scientific community propose the adoption of HTML for submitting and sharing scientific articles <a href="#bib14"> </a><a href="#bib18"> </a>. In addition to the ability to be easily ridden by machines or browsers, it is not static as PDF, e.g. the HTML format allows reading users to change beetwen the different supported styles only interacting with specific button placed at the bottom of the article.</p>
          <p>Enhancements are multiple. Videos, SVG images, user interactions are all things that PDF does not have.</p>
          <p>As just said, HTML is currently not used to publication, but instead many reasearchers already use this format because they use web-first editors or web processors which can export the document in HTML format.</p>
          <p><a href="https://www.elsevier.com/">Elsevier</a>, that is a world-leading publisher for academic research, <em>has posed a series of questions online to a group of 500 researchers</em> about which one do they prefer beetwen HTML or PDF to create research articles. First they asked few question about pros and cons and then, after a video regarding the <q>article of the future</q>​, they asked if the video changed its perception <a href="#bib14"> </a>. The 60% of the interviewed researcherers changed its mind about a HTML based article, instead a few more than a third of them was little sceptical about maintainig costs, offline reading and how much this features arerelevant. At least 50% of interviewed people declared that maybe in future, <strong>HTML can be the next way to create, share and navigate the future research articles</strong>.</p>
        </section>
      </section>
      <section id="section57">
        <h1>Editors and formats</h1>
        <p>All the research articles are created with at least one editor or <a href="http://www.webopedia.com/TERM/W/word_processing.html">word processor</a>, depending on authors' preferences. </p>
        <p>The most used editors are <strong>word processors</strong>, which are computer programs that allow users to do more actions than common text editors (as WordPad). Them are used to write down those kind of document such as <a href="https://products.office.com/en-US/word">Microsoft Word</a>,<a href="http://www.openoffice.org/">OpenOffice</a> and <a href="https://www.libreoffice.org/">LibreOffice</a>. Thesethree processors create files with their own format: <strong style="font-size: 12pt;">.doc(x)</strong>. They share the biggest amount of the market. MS Word, which cames with MS Office suit, during his apex was the most used one.</p>
        <p><a href="https://www.latex-project.org/">LaTeX</a> i.e. a typesetting system to create technical and scientific documentation, is popular enough to be the <em>most adopted format for drawing scientific documents in a markdown-like way</em>.Of course it comes with many editors (both markup and WYSIWYG styles), which shares more or less equally the market. One of the LaTeX's strenghts are the mathematical notation and the wide number of packages and styles avilable. Mathematical notation is pretty simplier than other editors, because it uses a well defined syntax<a href="#fn2"> </a>.</p>
        <p>In this chapter I talk about PDF and ePub formats (the most required from publishers), the WYSIWYG editors and, atleast, I will spend some words to describe HTML-based editors.</p>
        <section id="section66">
          <h1>PDF: de facto standard</h1>
          <p>The <strong>Portable Document Format</strong> (also known as <a href="https://acrobat.adobe.com/us/en/why-adobe/about-adobe-pdf.html">PDF</a>) is a format created by Adobe Systems in the first 90s <a href="#bib5">[5]</a>. It was born to facilitate the exchange of documents. It became popular because it is independent of software, hardware, or operating system, and now it is <em style="font-size: 12pt;">de facto standard</em>. In other words, documents looked always the same everywhere, regardless of which device or Operating System are opened.</p>
          <p>After its first release, the new versione PDF 1.1 came out, with more new interesting features such as links, notes and so on. Year over year new releases has been published until, in the 2008, PDF 1.7 became an official<a href="http://www.digitalpreservation.gov/formats/fdd/fdd000277.shtml"> ISO-standard (ISO 32000-1:2008)</a>.</p>
          <p>Everyone use it: businesses, universities and publishers (as written in <a href="#section54"> </a>​). In <a href="#figure_14"> </a>​ is shown that from April 2011 to February 2014, the most format searched with Google search engine is PDF. The percentage decreased in 2014, reaching 77 points degree. In the same year the ePub format usage, which was not there in previous years, is grown up.</p>
          <p>A PDF file is made up combining three different technologies:</p>
          <ol>
            <li>
              <p>A <a href="http://www.adobe.com/products/postscript/">PostScript</a> part to generate layout and graphics.</p>
            </li>
            <li>
              <p>A font-embedding system that aggregate used fonts inside the document.</p>
            </li>
            <li>
              <p>A storage system which embeds all elements (also the two listed above, images and other external things) togheter, in one single file.</p>
            </li>
          </ol>
          <figure id="figure_14">
            <p><img src="img/2014-02-pdf-vs2-1024x686.png" alt="2014-02-pdf-vs2-1024x686.png" /></p>
            <figcaption>PDF dominance <a href="​http://duff-johnson.com/2014/02/17/the-8-most-popular-document-formats-on-the-web/">​http://duff-johnson.com/2014/02/17/the-8-most-popular-document-formats-on-the-web/</a>.</figcaption>
          </figure>
          <p>PDF files did not succeed because of its technical supremacy, but mostly because Adobe, in 1993, realized that this format has to became free of charges, unlike its competitors <a href="#bib6"> </a>. This move is the architect of future popularity.</p>
          <p>The accessibility is a problem since PDF format's focus was more characterized by graphical rappresentation than semantical. When, in 2012, a new standard has been released (<a href="https://www.pdfa.org/pdfua-the-iso-standard-for-universal-accessibility/">PDF/UA</a>,Universal Accessibility) PDF files can be created specifically to be accessible for disabled people, with additional informations like XML tags, captions and audio descriptions. <strong>The PDF/UA standard is deeply different from the PDF one</strong>,this means that a PDF file can or cannot be compatible with the accessible standard. Moreover the only one program that allows users to modify compliance issues on a PDF file is Adobe Acrobat Reader Pro, where its license has a significant cost <a href="#bib7">[6]</a><a href="#bib1"> </a>​.</p>
          <p>The last problem is that PDF is a static format, good to be read form humans, but (because is shared as binary) is less good to be read from machines.</p>
        </section>
        <section id="section68">
          <h1>EPUB format</h1>
          <p>The <a href="http://idpf.org/epub">EPUB</a> (short for​ <em>electronic publication</em>) format is a open standard published by the <a href="http://idpf.org/">International Digital Publishing Forum</a>. It is a format for e-bookfiles<a href="#fn3"> </a>​. It can be used to send and publish a single file, while it contains a set of structured assets, <q style="font-size: 12pt;">including XHTML, CSS, SVG, images, and other resources</q>​.</p>
          <blockquote>
            <p>EPUB is the most widely supported vendor-independent XML-based (as opposed to PDF) e-book format; that is, it issupported by the largest number of hardware readers.<br /></p>
          </blockquote>
          <p>In October 2007 was realeased, with an expansion in 2010, EPUB 2. The version 3.0 became effective in October 2011(it was also re-updated in June 2014 to the version 3.0.1). EPUB 3.0.1 granted specialized formatting (for documentslike graphic novels and comic books), support for <a href="https://www.w3.org/Math/">MathML</a>, and enhanced accessibility features. From Junuary 5 2017, the current version is <a href="http://idpf.org/epub/31">EPUB 3.1</a><a href="#fn4"> </a> and its purpose is to simplify digital books specifications and align itself to the <a href="https://www.w3.org/wiki/Open_Web_Platform">Open Web Platform</a> (also because the <a href="https://www.w3.org/2017/01/pressrelease-idpf-w3c-combination.html.en">alliance beetwen IDPF and W3C</a> dated 2017). Right now, IDPF is developing a new common specifications for allowing users to open publications online,with the help of a simple browser without lose any features. </p>
          <p>An EPUB file is ZIP archive containing HTML5 files (with the last release), CSS and other needed assets. As said before, an EPUB is delivered as a single file to facilitate sharing, but it can be unzipped to see his internal structure (<a href="#figure_15"> </a>​). Inside the root folder there are two directories and a mimetype that must be included in. The mimetype is only needed to reveal what kind of ZIP is, in this case it only contains <code>application/epub+zip</code>​. The <strong style="font-size: 12pt;">META-INF</strong> directory must contains the <a href="https://www.w3.org/Submission/2017/SUBM-epub-ocf-20170125/#sec-container-metainf-files">reserved files</a> suchas <em style="font-size: 12pt;">encryption.xml</em>,<em style="font-size: 12pt;"> signatures.xml</em> and <em style="font-size: 12pt;">container.xml</em> whichis the main one. It has a <em style="font-size: 12pt;">rootfile</em> element for each one asset inside the EPUB (<a href="#figure_16"> </a>​ show its contents).</p>
          <figure id="figure_16">
            <p><img src="img/container.xml.png" alt="container.xml.png" /></p>
            <figcaption>​Example of a container.xml file.</figcaption>
          </figure>
          <p>Then there is the OEBPS ​directory that contains: ncx, opf and other required assets. Among them, <strong style="font-size: 12pt;">OPF</strong> integrates all metadata normally required as the <em style="font-size: 12pt;">unique-identifier</em> or other <a href="http://dublincore.org/">dublin core metadata</a> (whichare <em>dc:language</em>, <em>dc:creator</em> and others). The manifest node wraps every needed assets, in<a href="#figure_17"> </a> are the entire book in HTML format, a cover image and the table of content which is <em style="font-size: 12pt;">nav.html</em>.</p>
          <figure id="figure_17">
            <p><img src="img/opf.png" alt="opf.png" /></p>
            <figcaption>​OPF example from <a href="https://www.w3.org/Submission/2017/SUBM-epub-ocf-20170125/#example">EPUB specification in W3C</a>.</figcaption>
          </figure>
          <figure id="figure_15">
            <p><img src="img/structure-epub.png" alt="structure-epub.png" /></p>
            <figcaption>​EPUB 3.1 structure.​</figcaption>
          </figure>
          <p>An EPUB file, like a web page (which is basically what an EPUB is), is <em>completely responsive</em>. This mean that, istead of the PDF format (which is shown in the same way with any devides), its structure is different beetwen a full width monitor and a smartphone. That is because its core documents are HTML5. This is compatibility is very useful if a publisher has already produced a content in <em>HTML</em> or <em>HTML5</em> because the <em>conversion to EPUB 3 should be minimal</em><a href="#bib8"> </a>. </p>
          <blockquote>
            <p>This would likely point to HTML5 as the future for online and mobile content formats. EPUB should certainly becounted in that future, since the specification was drawn from existing and emerging web standards, in particular HTML5. <a href="#bib8">[7]</a>​</p>
          </blockquote>
          <p>EPUB and PDF formats can be used for the same purposes. But right now PDF still the one most used​ format (also required by publishers). in the <a href="#table_1"> </a>​ below, I listed pros and cons about the two formats.</p>
          <figure id="table_1">
            <table>
              <tbody>
                <tr>
                  <th>-</th>
                  <th>EPUB</th>
                  <th>PDF</th>
                </tr>
                <tr>
                  <th>PROS</th>
                  <td>
                    <ul>
                      <li>
                        <p>Written in XHTML and XML, easy to master form developers.</p>
                      </li>
                      <li>
                        <p>Developer as a unique ZIP file, there are not overhead inside the document.</p>
                      </li>
                      <li>
                        <p>Articles written in XML (XHTML and HTML5) can be easily transformed in EPUB</p>
                      </li>
                      <li>
                        <p>Documents are resized to fit with the screen reader.</p>
                      </li>
                      <li>
                        <p>Good accessibility features</p>
                      </li>
                      <li>
                        <p>MathML support to attach formulas</p>
                      </li>
                    </ul>
                  </td>
                  <td>
                    <ul>
                      <li>
                        <p>Control over layout and fonts.<br /></p>
                      </li>
                      <li>
                        <p>Hard structure, always the same with every devices.<br /></p>
                      </li>
                      <li>
                        <p>Free royalties, owned by Adobe.<br /></p>
                      </li>
                      <li>
                        <p>Standard De Facto, to share and print documents</p>
                      </li>
                      <li>
                        <p>Specific knowledments are not required (every editor can export to PDF)</p>
                      </li>
                    </ul>
                  </td>
                </tr>
                <tr>
                  <th>CONS</th>
                  <td>
                    <ul>
                      <li>
                        <p>Defined structure: needed elements inside the ZIP archive</p>
                      </li>
                      <li>
                        <p>Knowledgement about XML syntax needed.</p>
                      </li>
                    </ul>
                  </td>
                  <td>
                    <ul>
                      <li>
                        <p>Generated code is complex, difficult to master by developers.<br /></p>
                      </li>
                      <li>
                        <p>Conversion to web-friendly is difficult.</p>
                      </li>
                      <li>
                        <p>Not adaptive to various displays and devices.</p>
                      </li>
                      <li>
                        <p>Is difficult to read some articles with small screens (such as smartphones)<br /></p>
                      </li>
                      <li>
                        <p>Browser loading time</p>
                      </li>
                      <li>
                        <p>Very bad accessibility</p>
                      </li>
                    </ul>
                  </td>
                </tr>
              </tbody>
            </table>
            <figcaption>EPUB vs PDF<a href="#bib9"> </a>​<a href="#bib1"> </a>​. ​</figcaption>
          </figure>
        </section>
        <section id="section59">
          <h1>WYSIWYG and HTML-based editors</h1>
          <p>WYSIWYG is a kind of editors or word processors that allows developers to see what the end result will look like during the creation of the document interface. In other words users can modify directly the output itself. A WYSIWYG editor can add bold and italic, change text position, use undo and redo, create lists, links, anchors andimages <a href="#bib10"> </a>. The first difference that can comes in mind is beetwen a <em style="font-size: 12pt;">LaTeX processo</em>r (<a href="#figure_13"> </a>​). In this image leap out that the left editor allows users to edit directly the output interface, instead the right one is simply a code that will be processed after, to compile an interface similar to the left one. The output is the same (more or less) but the input in deeply different. The editor comes with a toolbar, which hasbuttons to insert HTML elements <code>&lt;h1&gt;</code>, <code>&lt;h2&gt;</code>​ and so on. In the other side LaTeX basics are needed to write markdown instructions.​</p>
          <figure id="figure_13">
            <p><img src="img/800px-Lorem_Ipsum_-_WYSIWYG_en_Latex_-_tekst_als_paden.svg.png" alt="800px-Lorem_Ipsum_-_WYSIWYG_en_Latex_-_tekst_als_paden.svg.png" /></p>
            <figcaption>​Difference beetwen a WYSIWYG editor and LaTeX code.</figcaption>
          </figure>
          <p>Popular WYSIWYG editors are MS Word, OpenOffice, LibreOffice (explained above) but also Google Docs and Dropbox Paper. These are word processors, which can give also style and structure to a document, not only text. Everyone has its own document structure, but this typology is largely used to work with HTML. Now I describe what are the most used and interesting, for my case, HTML-based editors.</p>
          <p><a href="https://www.tinymce.com/">TinyMCE</a> Is an Open Source library that can integrate a WYSIWYG HTML-based editor inside a website. Is a large project that involve 130 contributors with almost 5000 commits on Github. Among its features there are formatting, table insertion, image editing, customizable themes and it is accesible for <em>users with disabilities because it follows WAI-ARIA specification</em> making it compatible with screen readers such as JAWS and NVDA.</p>
          <p>Another strenght is that TinyMCE can be integrated everywhere. Can be found from CDN and package managers (NPM, Bower,NuGet), and integrated with frameworks such as JQuery and Angular.js, or inside common CMS like Wordpress or Joomla. Its community and contributors ar lively on networks, issues and enhancements are fastly fixed.</p>
          <figure id="figure_20">
            <p><img src="img/tinymce.png" alt="tinymce.png" /></p>
            <figcaption>​TinyMCE interface.</figcaption>
          </figure>
          <p><a href="https://www.authorea.com/">Authorea</a> is created and developed in 2013 by two reasearcherers A. Pepe and N. Jenkins. They believed to fix collarative problems that went out during the creation of technical, scholarlyand scientific writings. The first problem is the complex workflow to follow due to write a paper (<a href="#section52"></a>). It is very popular among physicists and astronomers which are the biggest categories of users.</p>
          <p>Authorea is an online platform (<a href="#figure_18"> </a>), for that reason a paper is an HTML file, actually an article is a <em>git repository </em><a href="#bib11"> </a>. In fact authors can take advantages of using its versioning system, without any installations, to keep track of every single change displayed in the same screen window of the project. Everyone, which has the right permissions, <em>can undo specific commit and revert to its previous version</em>. Every article in accessible anywhere, from any device connected to the Internet, and any TeX installations are not required. About tables and formulas itis very advanced. Authorea lets anyone write mathematical notations, tables, plots and fgures in each <strong>LaTeX</strong> and <strong>MathML</strong>.</p>
          <figure id="figure_18">
            <p><img src="img/authorea.png" alt="authorea.png" /></p>
            <figcaption>​Authorea interface.</figcaption>
          </figure>
          <p><a href="https://www.fiduswriter.org/">Fidus Writer</a> is an open source WYSIWYG collaborative HTML-based word processor made for academics who need to use citations and formulas within papers. All articles can be exported in more ways: website, paper or ebook. In each case the focus is the content, layouts can be choose during publication. FidusWriter <em>supports LaTeX </em><a href="#bib13"> </a>​ for adding footnotes and citations directly inside the documents.</p>
          <p>It is also <strong>collaborative in real-time</strong>, which means that FidusWriter aims to fix sharing problemsfor many-authors papers <a href="#bib12"> </a>​, and everyone can automatically see and write the document in the same time.</p>
          <p>Its formula system works hand by hand with MathJax, MathType and LaTeX.</p>
          <figure id="figure_19">
            <p><img src="img/fidus-writer_358563_full.png" alt="fidus-writer_358563_full.png" /></p>
            <figcaption>​Fidus Writer interface.</figcaption>
          </figure>
          <p>​<q><a href="https://dokie.li/">Dokieli</a> is a client side editor for decentralised article publishing, annotations and social interactions.</q> Is strongly based on decentralization, authors can publish wherever they want to. Authors can edit any HTML files just importing Dokieli CSS and JavaScripts. </p>
          <p>In this case Dokieli is not a real WYSIWYG word processor, but instead is more a special module that can turn a browser-rendered paper into a in-browser editable, and annotateable, HTML document. It works same way shown in <a href="#figure_21"> </a>​.</p>
          <p>Dokieli allows authenticated authors to create in-text annotations and, of course, reply to them with the<a href="https://www.w3.org/TR/annotation-model/"> W3C web annotation specifications</a>. It also implements <em>Linked Data Notifications</em> for notifications about entire or part of articles. Now it grants notifications for annotations, replies, shares, reviews, citations/links, bookmarks and likes.</p>
          <p>A big Dokieli's strenght is its <em>full compatibility with HTML5</em>. All HTML5 elements can be attached and inserted with it, and now some new UI features to do that are under development. For that reason the entire view style can be customized with just some CSS lines, or if needed style can be changed directly with Dokieli (e.g. passing fromnative visualization to Springer LNCS view).</p>
          <figure id="figure_21">
            <p><img src="img/dokieli-citation.jpg" alt="dokieli-citation.jpg" /></p>
            <figcaption>Adding a reference inside a document which has Dokieli imported in.</figcaption>
          </figure>
        </section>
      </section>
      <section id="section61">
        <h1>RASH</h1>
        <p>RASH is a Web-first format for writing HTML-based scholarly papers. RASH is acronym for <em>Research Articles in Simplified HTML</em>,and it consists in a subset of 32 HTML elements in <a href="#table_2"> </a>. This format is placed inside the <strong>RASH framework</strong>, i.e. a set of specifications and tools for RASH documents.</p>
        <p>RASH, because is HTML, has been designed to be easy to learn and use<a href="#fn6"> </a>​, and it works well with sharing scholarly documents (and embedding semantic annotations) through the web.For the same reason more articles can be semantically linked each other, with interactive behaviours granted by JavaScriptand web browsers.</p>
        <p>RASH is strictly focused on content writing, every other needed actions like validation, visualization and conversion are all leaved to its framework.</p>
        <p>RASH is based on WAI-ARIA Module 1.0, which grants complete accesibility for commonly used screen readers like JAWS,NVDA and VoiceOver</p>
        <figure id="table_2">
          <table>
            <tbody>
              <tr>
                <th>Pattern</th>
                <th>RASH element</th>
              </tr>
              <tr>
                <td>
                  <p>inline</p>
                </td>
                <td>
                  <p><code>a</code>, <code>code</code>, <code>em</code>,<code>math</code>, <code>q</code>, <code>span</code>,<code>strong</code>,<code>sub</code>, <code>sup</code>,<code>svg</code></p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>block</p>
                </td>
                <td>
                  <p><code>figcaption</code>, <code>h1</code>, <code>p</code>,<code>pre</code>, <code>th</code></p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>popup</p>
                </td>
                <td>
                  <p><em>none</em></p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>container</p>
                </td>
                <td>
                  <p><code>blockquote</code>, <code>body</code>,<code>figure</code>, <code>head</code>,<code>html</code>, <code>li</code>,<code>ol</code>,<code>section</code>, <code>table</code>,<code>td</code>, <code>tr</code>, <code>ul</code></p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>atom</p>
                </td>
                <td>
                  <p><em>none</em></p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>field</p>
                </td>
                <td>
                  <p><code>script</code>, <code>title</code></p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>milestone</p>
                </td>
                <td>
                  <p><code>img</code></p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>meta</p>
                </td>
                <td>
                  <p><code>link</code>, <code>meta</code></p>
                </td>
              </tr>
            </tbody>
          </table>
          <figcaption>The use of structural patterns in RASH<a href="#bib15"> </a>​ </figcaption>
        </figure>
        <section id="section65">
          <h1>RASH framework</h1>
          <p>Every new proposed markup language, in general, has some issue. RASH, in order to fix them and facilitate its utilization, has its own framework. The main idea is to allow each author to keep using her/his preferred tools, a liberal approach.</p>
          <p>The <a href="https://github.com/essepuntato/rash">RASH framework</a> is a set of specifications and writing/conversion/extraction tools for writing articles in RASH. All softwares are releases with ISC license.</p>
          <p><em>RASH is based on RelaxNG grammar</em>, a well-known schema language for XML documents, which is fully compatiblewith HTML5 specifications. The first element that we can find inside the framework is the <strong>validation</strong>,using the HTML5 validator (<a href="https://validator.w3.org/nu/">W3C Nu HTML Checker</a>). Checking the document,the developed script will alert RASH users about potential mistakes about each HTML5 and RASH togheter.</p>
          <p>Also <strong>visualization</strong> is a framework's duty. A browser can display a RASH document (in the same wayit displays common HTML documents), and wrapped CSS and JavaScript libraries render the article itself. Actuallyit uses external libraries (<a href="http://getbootstrap.com/">Bootstrap</a> and <a href="https://jquery.com/">JQuery</a>)in order to guarantee the correct visualization. The paper layout can be easily changed, passing beetwen native visualization and other requested LaTeX-style layout, immediatly in browser. Articles also have a footbar with statistics about the paper (e.g. number of words, figures and other blocks).</p>
          <figure id="figure_22">
            <p><img src="img/rash-framework.png" alt="rash-framework.png" /></p>
            <figcaption>​The RASH framework.</figcaption>
          </figure>
          <p>As said before, the RASH framework, is fully based on a liberal approach, this means that <strong>conversion system</strong> must be implemented.<br /></p>
          <p><em>A RASH document can be turned into different LaTeX styles</em> (<strong>RASH2TEX</strong>), such as <a href="https://www.acm.org/publications/proceedings-template">ACM ICPS</a>, <a href="https://www.springer.com/gp/computer-science/lncs/conference-proceedings-guidelines">Springer LNCS</a> andothers, with the usage of corrispondant XSLT 2.0 documents. This is the crucial step in order to guarantee theuse of RASH. As documented in <a href="#section52"> </a>​ LaTeX and PDF in the most common pattern to write articles, without this conversion no one would use RASH.</p>
          <p><em>A ODT file can produce a RASH</em> (<strong>ODT2RASH</strong>) with Another XSLT stylesheet is used in this case. OpenOffice, with its standard features like styles, elements and formulas, can be used for writing scientific documents which can be converted into RASH formatted articles. Inside the RASH suite there is a web-based service and a java application for online and online conversion process.</p>
          <p>The last released conversion process is <strong>DOCX2RASH</strong> developed by Nicoletti A. This software allows authors of scientific documents to use Microsoft Word as word processor to write its works, having at the sametime the benefits of a HTML-based format. It has been thought because MS Word users were no covered by RASH conversions. Also to develop this process, XSLT 2.0 stylesheets has been used to convert XML (which is the base of DOCX) into HTML.</p>
          <p>Very important is <a href="http://dasplab.cs.unibo.it/rocs">ROCS</a> (RASH Online Conversion Service) i.e., the online conversion tool for supporting authors to write RASH documents and preprearing submission that can be easily processed by current journals or conferences. ROCS integrates all the conversion tools listed above.</p>
          <p>Its architecture is described with the <a href="#figure_23"> </a>​. It allows turning a document in ODT or DOCX format into a RASH document, and then into LaTeX according to Spinger LNCS or AMC IPCS layouts.</p>
          <p>Users can upload four different files, ODT, DOCX, RASH or a RASH archive (which has also related asset files). The output is a ZIP containing the original document plus the LaTeX-converted file, because is useful, if authors uploaded ODT or DOCX article, to have both RASH and LaTeX.</p>
          <figure id="figure_23">
            <p><img src="img/rocs.png" alt="rocs.png" /></p>
            <figcaption>​<em>ROCS</em> abstract architecture.​</figcaption>
          </figure>
        </section>
      </section>
    </section>
    <section id="section15">
      <h1>RAJE: RAsh Javascript Editor</h1>
      <p>Most of this project is centered on the development of a HTML-based editor named RAJE (RAsh Javascript Editor), whichis no more than a WYSIWYG editor (these kinds are largely discussed in <a href="#section59"></a>​). It Is based on HTML, but for more precision it uses a subset, called RASH (<a href="#section61"></a>).</p>
      <p>Inside this chapter i will explain what RAJE is and all the functionalities grant to users (like the splash window, toolbars and other things) and than I will describe the strenghts, extolling the reasons for which it was created.</p>
      <section id="section21">
        <h1>Functionalities</h1>
        <p>Among the main functions that RAJE provides we can find out some obvious and universal needed in a editor such as toolbar and software menu; Other, instead, are specific to the format in which the editor is based on (e.g. swap beetwen preview and editor modes). I will also talk about the header editability, that deserves to have an entire dedicated section because its managment is different from the one of the body. In the end I will talk of the secret shortcuts that I have implemented to speed up the writing of.</p>
        <section id="section75">
          <h1>Splash window</h1>
          <p>An high number of editors, not only the text ones (e.g. <em>Android studio</em> and his welcome window shown in <a href="#figure_5"> </a>​), integrate as first screen a window commonly named <strong>splash window</strong> or <strong>welcome window</strong>. During the editor development I found out how is necessary a splash window, as first screen of a software that require to modify multiple projects. RAJE, in fact, allows you to edit and create articles, where an article is actually a folder containing all assets normally required by every RASH document. Of course is permissible to think that every users wants to create more than one article, in fact the idea in which I created RAJE allows to manage multiple files, simply knowing the absolute path of its folder.</p>
          <figure id="figure_5">
            <p><img src="img/Android_studio_welcome_screen_one_proj2.png" alt="http:,,www.techotopia.com,images,9,97,Android_studio_welcome_screen_one_proj2.png" /></p>
            <figcaption>​Welcome window of <em>Android Studio</em>.</figcaption>
          </figure>
          <p>The RAJE splash window in <a href="#figure_6"> <br /></a>​ has been developed following a similar scheme of <a href="#figure_5"> </a>​. Is naturally presents a list of recent articles, disposed in order from the more recent to the less one. For every element of this list, important informations to correctly visualize the article are saved. It is also possible delete elements from the list, especially if we are talking about obsolete articles, or not present inthe machine anymore. Recent projects are not updatable, is I opened the article X and then I change its position in another folder, I will not be able anymore to use its "recent article" to open it, and will be obligatory tofind manually the new folder position.</p>
          <p>There are 3 buttons in the splash. The first one needs to create a new article choosing the destination folder and the name, with the created article will be called (can not be edited next). The opening of an already created article (e.g. one sent by a colleague) is related to the pressure of the second button <em>Open RASH article</em>. In this case is necessary to have physically the folder on the machine.</p>
          <p>Finally the third button is something more particular, starting from a URL like this this one: <code>https://github.com/{author}/{repository}</code>​ containing a RASH repository, is possible download into the personal machine and edit directly with RAJE. To descrive this modality is my task in the<a href="#section34"></a>​. </p>
          <figure id="figure_6">
            <p><img src="img/splash.png" alt="splash.png" /></p>
            <figcaption>​RAJE splash window.</figcaption>
          </figure>
        </section>
        <section id="section70">
          <h1>Toolbar and elements</h1>
          <p>As anticipated before, RAJE is a WYSIWYG HTML-based editor, for this reason exaclty as the others RAJE has a toolbar that wraps a large amount of actions allowed on the article, if not all of them, at least the most importants. As of this important component in the initial phase of the development, I adopted a minimalistic style, recovering what are the graphic guidelines of Bootstrap. Then will be my task to transform this toolbar more similar to the most famous and commercial editors.</p>
          <p>In this section, my purpose is to give a description of the toolbar with screenshots.</p>
          <p>This toolbar is made up with a set of buttons grouped and divided by category, following the RASH specs is possible to notice the difference beetwen the categories of element or action that should be applied to the document, when the user press the corrispondent button. Is also possible invoke a tooltip that shows up the common name to recognize the button (<a href="#figure_1"> </a>).</p>
          <figure id="figure_1">
            <p><img src="img/tooltip.png" alt="tooltip.png" /></p>
            <figcaption>​Tooltip shown on button hover.</figcaption>
          </figure>
          <p>Refersto the <a href="#figure_2"> </a>​ starting from left to right we find the first two buttons: respectively <em>undo</em> and <em>redo</em>.The behaviour hide behind these special button is strictly necessary for what concern drafting of the document. Without its presence, drawing the article would be more complex and difficult, furthermore the revision time wouldsoar. Thus the introduction of these functions was a bound choice.</p>
          <p>The third and fourth button are another great classic of the editors, i.e. <strong>bold</strong> and <em>italic</em>, that can transform the selected text.</p>
          <p>From the fourth button onwards, we found instead some special behaviours about RASH, ever inside the <strong>inline</strong> category (behaviours applied only to plain text) that are: <em>code</em>, <em>link</em>, <em>cross reference</em>, <em>quote</em>, <em>subscript</em> and <em>superscript </em><a href="#bib2"> </a>. Among the various, noteworthy is the cross reference one (represented with ad anchor) that shows a modal window with which to choose exaclty on what element refers, and is also allowed to create a new <em style="font-size: 12pt;">reference</em>or <em style="font-size: 12pt;">footnote</em>. These buttons need to have a portion of text selected.</p>
          <figure id="figure_2">
            <p><img src="img/toolbar.png" alt="toolbar.png" /></p>
            <figcaption>​Editor's toolbar.</figcaption>
          </figure>
          <p>The second group includes the <strong>blocks</strong>​, that are, as you can find in the ufficial RASH documentation: <em>codeblock</em>, <em>blockquote</em>, <em>ordered list</em> and <em>unordered list</em>.</p>
          <p>The element <em>codeblock</em> is very important to insert some code snippets, and is allowed wrote down some codelines (also in HTML format) without interpretation and are shown as a web page. In other words everything is wrapped inside the opening and closing of the <em>code tag</em> is only graphical code, but is text at all effects.</p>
          <p>About the quotes, the <em>blockquote</em> element comes in our aid. A quote can be added, and instead the normal quote (that creates a inline citation), it is extended to all line. This kind of citation are very important, also to give more emphasis than the ones inserted in text.</p>
          <p>Is acceptable and predictable decide to insert lists in the draft document, about that list buttons come in aid to users. The most used and popular naturally are the ordered and unordered. Every users can have the possibility to add the list more in line with his will.</p>
          <p>Then, inside the block called <strong>figure</strong> we find out table, figure and formula. Always following the directions inside the RASH documentation, we can notice the importance of using these three blocks (considered main for writing research articles).</p>
          <p>The tables are inserted with a small configuration button, positioned at their left. The table can be modified thanks to this button and, among the aother permitted operations, we can resize ti and change his heading. Another important functionality, permitted by RASH but not implemented yet in RAJE, is the expantion of cells or the entire column. Will be one of the first new operations permitted in the next releases of the editor.</p>
          <p>The insertion, with the corrisponding button, of the images is entrusted to the second button of the block: <em>figure</em>. After pressing the button, will be immedialty visible a modal window (<a href="#figure_3"> </a>) that permits to chosse beetwen two different modality: selection a local image file or typing an URL. Both import physically the image inside the project folder.</p>
          <figure id="figure_3">
            <p><img src="img/figure_modal.png" alt="figure_modal.png" /></p>
            <figcaption>​Modal window to insert images.</figcaption>
          </figure>
          <p>One of the most important buttons is surely the one to add a new formula in the selected position. This action takes place with the invocation of a simple asciiMath editor, that at all effects create an environment where set andselect the formula. I will discuss this after, in the <span class="cgen" data-rash-original-content=""><a href="#section33">Section 3.2.1</a>.</span></p>
          <p>I developed the dropdown section to grant the possibility to add new sections such the special <em>abstact</em> and <em>acknowledgement</em> or common sections. The only special section that can be added in this way are the two quoted above. If these are already inserted inside the document, the screen will reposition exaclty at the begin of the section, showing its contents. Insted will be executed the real insertion in the order describer by RASH.</p>
          <p>Every time that the caret position change, the dropdown content will be updated with the insertable sections. If the caret is inside af a first level section, will be possible add both a top-level section or a sub sections asshown in the code.</p>
          <pre><code>&lt;section&gt;&lt;h1&gt;Top level section&lt;/h1&gt;[caret]
&lt;/section&gt;</code>​ ​</pre>
          <p>Is very important remember that this is not the only one way for the user to add sections, instead it is for the abstract and acknowledgement (more informations about shortcuts in the <a href="#section74"></a>)</p>
        </section>
        <section id="section72">
          <h1>Software menu</h1>
          <p>RAJE is a software, and such as, is served with a menu. Its implementation has been chosen to my utter discretion. Is very important to say also that the visualization can considerably change beetwen the different Operating Systems, in particular passing from Unix systems to Windows. Inside this section I will not explain step by step every single button inside the dropdowns, because now the project, in particular this module, is undergoing updates. My task is to explain, with some examples, why and how i devided and group the multiple actors of the menu.</p>
          <p>Sincerely I did not started from a development without foundations, instead I followed few guidelines and advices founded on the Internet. In particular I was inspired by the composition of some editing softwares menu. Amongthe various <strong>Visual Studio Code</strong>, <strong>Atom text editor</strong> (both used during the making of) and <strong>Open Office</strong> as shown in <a href="#figure_4"> </a>​. </p>
          <figure id="figure_4">
            <p><img src="img/menubar.png" alt="menubar.png" /></p>
            <figcaption>​Open Office menu bar.</figcaption>
          </figure>
          <p>The kind of organization i followed was in line with this schema. Omitting the button with the name of the software,that is one of the features only visible on Unix systems, <strong>File</strong> and <strong>Modify</strong> has been introducted in RAJE.</p>
          <p>File is necessary to work with multiple documents, it gives the opportunity to open a new window about another article. Modify, instead, encloses a great number of actions allowed inside an editor: <em>undo</em>, <em>redo</em>, <em>cut</em>, <em>paste</em> and <em>copy</em>. Moreover there is a button to save file and others used to modify the header.</p>
        </section>
        <section id="section73">
          <h1>Header</h1>
          <p>The header of a RASH file is made up with more elements, needed to contextualize the entire article. <strong>Title</strong> and <strong>authors list</strong> are obviously very important for what concern documents of scientific mold and, in this case, also <strong>keywords</strong> and <strong>ACM subject categories</strong>.</p>
          <p>Thank RASH you can have articles written by many authors, for this reason RAJE permits the insertion, modification and deletion of authors. Among the other things is reasonable wanting to change the author's order, triggering the corrispondent action from software menu. Now you can move them simply with a <code>Drag &amp; Drop</code> technology. As for what concerns the deletion of authors, you need to choose the relative behaviour from the menu.</p>
          <p>As well as the other elements that make up the header, they are easily editable with a <em>double click</em>. I chose to restrict the editing permissions of this crucial part because it has been structured very more complex than the rest of the document, so also a small structural edit would have foreclosed the possibility of saving (and then render) the RASH document correclty. Besides the double click is a banal action, and is the main action to express the willingness to interact with a graphic element or text modification (same as rename action on windows).</p>
          <p>Categories and keyword can be editable also after the <em>double click event</em>, the only one difference is thatthe behaviour is the same as the inline code elements: <em>space button</em> will insert a <code>space</code> insidethe element, instead the <em>enter key</em> will insert a <code>space</code> after the element (it indicates theend).</p>
          <p>The title is usually accompanied with a subtitle. If during the title editing you want to add the subtitle, you can do it simply pressing the <em>enter key</em>.</p>
          <p>So, for what concern the header of a scientific document in RASH format, you can modify it with the most absolutly compatibility. The only exclamation mark is the different editing way other than the body, with a lesser degree of restriction.</p>
          <p><br /></p>
        </section>
        <section id="section74">
          <h1>Shortcuts</h1>
          <p>In this subsection, I am here to describe and create the list of all the keyboard shortcuts that i decided to implement. The implementation modalities will be deeply explained in <a href="#section38"></a>.</p>
          <p>Inside the list the key <code>mod</code> is to say <code>ctrl</code> for <strong>Windows</strong> and <strong>Linux</strong>, and <code>cmd</code> for <strong>OSX</strong>.</p>
          <ol>
            <li>
              <p>​<code>mod+s</code> is the local save. All changes that will occur to the document will be viewable inside theHTML source document.</p>
            </li>
            <li>
              <p><code>mod+shift+s</code>​ is the push to Github. It shows a modal window to insert the comment which it willbe labelled.<br /></p>
            </li>
            <li>
              <p>​<code>mod+c</code>​, <code>mod+v</code>​ and <code>mod+x</code> are <em>copy</em>, <em>paste</em> and <em>cut</em>.</p>
            </li>
            <li>
              <p>​<code>mod+z</code> and <code>mod+shift+z</code>​ are the shortcuts for <em>undo</em> and <em>redo</em> actions.</p>
            </li>
            <li>
              <p><code># enter</code>​ permits to create a new section. Based on the number of the characters <code>#</code>​ you can choose the deepness of the section.</p>
            </li>
            <li>
              <p><code>* enter​</code>​ add an unordered list.<br /></p>
            </li>
            <li>
              <p>​<code>1. enter</code> add an ordered list.</p>
            </li>
            <li>
              <p>​<code>| enter</code> add blockquote element.</p>
            </li>
            <li>
              <p>​<code>` enter</code> add codeblock element.</p>
            </li>
          </ol>
        </section>
      </section>
      <section id="section32">
        <h1>Strenghts</h1>
        <p>RAJE has been created to remedy the problem: having a WYSIWYG editor of research scientific articles structed in RASH format, furthermore to have a centralized place acessible to everyone where to store documents. During all the presentation of this section, is my task describe the strenghts of this project.</p>
        <p>During the development period, with my Co-supervisor we defined another needs, related to the document accessibility (issue widely described inside the ), a math formulas editor with asciiMath as input, which generates rendered formulas with MathJax process.</p>
        <p>The second pro that I will present is integration with Github, in particular I will talk about how I tought to managethe interconnetion beetwen more authors of same documents.</p>
        <section id="section33">
          <h1>Mathjax and Mathml</h1>
          <p>Starting from the <a href="https://rawgit.com/essepuntato/rash/master/documentation/index.html">release 0.6 di RASH</a>,thanks to work performed by my colleague Vincenzo Rubano (<a href="https://github.com/falcon03">@falcon03</a>),is not possible render asciiMath formulas with MathJax processor.</p>
          <p>A significant challeng of this work was to introduce an environment tought to be easy to use, with all tools aviabile,so that also who do not know the key sequence can think of build the mathematical formula. The editor (<a href="#figure_7">Figure 7</a>) is a modal window. It has a <em>textbox</em> for <strong>ascii</strong> input characters, and a screen prepared to render it in real time. In fact another challeng that I charge was the refresh speed of the formule, that happens every time a character or a set are typed.</p>
          <p>For those not familiar with the syntax necessary to add particular symbols or functions, they can always use buttons that i tought to add immediatly under the input textbox. The arrangement of the elements was designed crossingthe <strong>asciiMath</strong> syntax and the <strong>OpenOffice</strong> editor layout.</p>
          <figure id="figure_7">
            <p><img src="img/formulaeditor.png" alt="formulaeditor.png" /></p>
            <figcaption>​RAJE formula editor.</figcaption>
          </figure>
        </section>
        <section id="section34">
          <h1>Marriage with Github</h1>
          <p>As already mentioned more times before, RAJE is strictly wired with a cloud-like system in such a way to easy upthe communication and sharing of articles beetwen its stakeholders (which are, in addition to the authors, reviewersin charge of reviewing).</p>
          <p>Github is the most popular network for Open Source projects, known and utilized from million of developer all overthe world. Its beating heart is <strong>Git</strong>, a version control system built by Linus Torvald during the development of the operating system called with the name of Linux. Now is a must for the Open Source Developers to have a Github profile. Not only for curriculum purposes, but also for appreciations and improvements of its own projects. To every user is allowed to work with people around the world to built project more and more complete and complex, with the only bond, know English. All texts are entirely in English.</p>
          <p><em>Why this powerful system like this is not popular also for sharing textual material?</em> To answer this questionwe need to know that Git has been built with the purpose of sharing code, and that simplify all things. Code needs to be interpreted by a machine, that's why it needs to define where every instruction starts and ends. This because every machine read, understand and elaborate only one row at time.</p>
          <p>If RASH would be raw text, probably other version control sources would be more suitable. But a RASH document is not only plain text, these documents are HTML; Thanks this small difference we can say that RASH and Github they go perfectly in tune each other.</p>
          <p>After this introduction we can describe the real integration beetwen the editor and the network.</p>
          <p>In this section, after give some basic informations about what is Github, we can extend the discourse started in <a href="#section75"></a>​ describing the last button behaviour. Pushing it you can create a new folder to the choosen path, that will be immediatly filled with code and assets of the article corrispondent to the typed URL. To all effect is the samethings to open a document previously created, with the only difference that this time we are talking about the<code>https://github.com/{author}/{repository}</code>​ repository.</p>
          <p>When a user wants to save online the content of a document, to do it, he needs to be logged in with its personal Github profile. These types of requeste are not allowed without authentication, which certifies the user identity.</p>
          <p>Omitting the authentication mode, o better the development of the predisposed module for handling authentication, the user has the option to save the document online, on Github servers. The action can be executed with the shortcut <code>mod+shit+s</code>​ or the appropriate button in software menu.​ Will be viewed a simple modal that permits the user to label up the entire sets of changes under an unique comment. When the upload is done will be shown a success message, non invasively, on the screen. Now the push has been executed with success.</p>
          <p>The mangement of sharing documents needs that all repository contributors are always updated to the latest article version, to avoid merge conflicts. In the RAJE current version this functionality has not been introduced yet,but is a crucial fact of distributed system management, will be implemented soon.</p>
        </section>
      </section>
    </section>
    <section id="section22">
      <h1>RAJE: technical overview</h1>
      <p>In this chapter I introduce tell the technologies and the development process i have adopted to create RAJE.</p>
      <p>The editor is multiplatform, but it has been created as unique project, with the libraries made available from Electron,Also Known As <em>Atom shell</em>.</p>
      <p>In this chapter I will describe what Eletron is, and how I used the <em>File System's API</em> to create this software. Next I will introduce the beating heart of RAJE, the script <em>raje.js</em> that I personally built with the aid of <a href="https://jquery.com/">JQuery</a> and some other modules, like <a href="https://github.com/timdown/rangy">@TimDown's rangy</a> used to abstract the selection elements and <a href="https://craig.is/killing/mice">Mousetrap</a> to simplify the manage of shortcuts. Finally, regarding Electron, I will explain how I have made different deploys for the different Operating Systems supported by RAJE: <em>OSX</em>, <em>Windows</em> and <em>Linux</em>.</p>
      <section id="section23">
        <h1>How Electron works</h1>
        <p>Electron is a Open Source framework created by Github developers. Based on the already famous node.js API, it is avery lively project and it can obtain more and more supporters. Today we can count near <em>13.000 commits </em>divided beetwen the <em>500 total contributors</em>.</p>
        <p>Electron is pratically a browser wrapper, it utilize Chromium as browser to create multi platform softwares. Thanks to this framework is guaranteed the development with technologies like HTML, CSS and Javascript.</p>
        <p>Two are the important processes in a Electron-based software: The <em>Main process</em> and the <em>Renderer process</em>.</p>
        <p>The Main process is a node.js script, that includes every kind of necessary information and setting to guarantee the smooth progress of the software, e.g. it creates and shows the windows, uses node.js modules and can accesto databases.</p>
        <p>Instead the Renderer process is a script imported directly in the document with the classical syntax <code>&lt;script src="rendered.js"&gt;&lt;/script&gt;</code>​. It allows RAJE to utilize NPM packages (the manager of node.js modules) and can communicate in an <em>Async</em> or <em>Sync</em> way with the main process to exchange messages. ​</p>
        <p>After this general presentation, I describe in detail the main API that I have adopted during the project development, and how I handled the communication beetwen processes.</p>
        <section id="section27">
          <h1>File system API</h1>
          <p>The File System APIs were required, expecially for a software that can do CRUD operations on files, indeed. In my aid, in this case, the FS library of node.js has intervened.</p>
          <p>This is one of the most important library, because it is inside the package of libraries inserted inside the official distribution of node, then it was enough to import it with the next line of code: <code>const fs = require("fs")</code>.</p>
          <p>Inside this module, we can find out some very useful methods such as <code>readDir</code>, <code>writeFile</code>​ and <code>readFile</code>, which are <em>asynchronous</em>, but the corrispondent method that ends with Sync (e.g.<code>readDirSync</code>)is its sync counterpart.</p>
          <p>When a new article is created, RAJE creates the new directory and copy inside every necessary asset with this code:</p>
          <pre><code>copyAssetFolder: function (assetFolderName, folderPath) {fs.mkdir(`${folderPath}/${assetFolderName}`, (err) =&gt; {if (err) console.log(err)fs.readdirSync(`${assetFolderName}`).forEach((file) =&gt; {let fullFilePath = `${assetFolderName}/${file}`if (fs.lstatSync(fullFilePath).isFile())fs.createReadStream(fullFilePath).pipe(fs.createWriteStream(`${folderPath}/${assetFolderName}/${file}`))})})
}</code>​ ​ ​ ​<br /></pre>
          <p>Inside the method signature there are two input variables: assetFolderName and folderPath. The first one is the nameof the directory that contains the necessary assets for visualising a RASH document, while the second is the absolutepath of the article's directory, where the assets will be saved. <br /></p>
          <p>The asynchronous mehod <code>fs.mkdir()</code>​ show us that it has a callback function (in this case is very simply and it return a not empty variable only if there is an error). Then the directories readed and the names of its contents are written inside an array, and each element in the folder is a variable inside the array. Finally a read stream is created to read the content of the assets and to write a new file with the same content, to the destination folder.​</p>
          <p>Inside the below code snippet I used the fs package to do some easy operation with the FS API.</p>
          <p>Another example that i can show is when the user express to open a new article. The editor wants to be sure that the folder has been created before with RAJE.</p>
          <pre><code>checkIfRaje: function (dirPath) {let isRaje = falsefs.readdirSync(dirPath).forEach((file) =&gt; {if (file == '.raje')isRaje = true})return isRaje
},</code>​</pre>
          <p>One of the main reasons that has guided me to create a real software was the need to interface with file system, and that is not allowed by all browsers<a href="#fn1"> </a>, so the development has been hijacked to this way.</p>
        </section>
        <section id="section28">
          <h1>Github API</h1>
          <p>The APIs to communicate with Github are implemented using a wrapper: <a href="https://github.com/pksunkara/octonode">Octonode</a>.</p>
          <p>The interfaces that Github provides are updated to the version v3, I think that these API allows a lot of actionson contents, users and repositories. Of course it provides also OAuth2 login.</p>
          <p>To set up a project and arrange to have login, first of all is necessary that the <em>developer application </em>is already created, as shown in <a href="#figure_8"> </a>​, and be in possession of the two necessary codes: <em>client ID</em> and <em>secret ID</em>.</p>
          <figure id="figure_8">
            <p><img src="img/github.png" alt="github.png" /></p>
            <figcaption>​RAJE developer application.</figcaption>
          </figure>
          <p>As soon the application is created, it is now possible to use some code lines to authenticate users with the protocol OAuth2. The Octonode library also serves a different method to authenticate with Github. I implemented the authentication as follows: ​you can store all needed functions inside a <code>client</code> variable, that is created passing the token generated by Github when a user make the request to be logged in with its account.</p>
          <p>In order to obtain this token, having each the client and secret ID, the user needs to press the login button. Then the request in <a href="#figure_9"> </a> will be shown. This window will describe what kind of permissions RAJE needs, it can read all public information about the user (such as email, name, biography and so on) and about public repositories (the ones which are importantfor RAJE). Another permission is to read the notifications, but now nothing about that is yet implemented.</p>
          <figure id="figure_9">
            <p><img src="img/authorization.png" alt="authorization.png" /></p>
            <figcaption>​Github authorization window.</figcaption>
          </figure>
          <p>Once authorizations are given by the use, a message is sent to Github servers, and a result comes back in return.Normally Github needs an URL callback, so the token can be directly sent there, where it will be elaborated. RAJE, instead, as a browser can handle the navigation events. It can listen for the callback and decode the URL as shown below.</p>
          <p>First of all I use a regular expression to decode and extract the code from URL (as shown in code block).</p>
          <pre><code>var raw_code = /code=([^&amp;]*)/.exec(url) || null
var code = (raw_code &amp;&amp; raw_code.length &gt; 1) ? raw_code[1] : null</code><br /></pre>
          <p>Then I will elaborate the code to get the user token directly from the Github API with the method <code>requestGithubToken(githubOptions, code)</code>​.This method needs as input the options (which are the IDs explained before) and the code extracted from the callbackURL.</p>
          <pre><code>function requestGithubToken(githubOptions, code) {apiRequests.post('https://github.com/login/oauth/access_token', {client_id: githubOptions.client_id,client_secret: githubOptions.client_secret,code: code,}).end(function (err, response) {if (response &amp;&amp; response.ok) {/** Save github token to settings */storage.set('githubSettings', { 'token': response.body.access_token }, (err) =&gt; {if (err) throw errgetUserInfo()})} else {// Error - Show messages.console.log(err)}})
}</code>​</pre>
          <p>The method above uses a node.js module called <em>superagent</em>, an high level wrapper for ajax requests. Withthis module we can make a <strong>POST</strong> request, passing all needed informations to get, after, the token. In this snippet the token is saved inside the <em>electron_storage</em>, i.e. a simple environment JSON storage for the current machine.</p>
          <p>The <strong>login workflow</strong> is the following:</p>
          <ol>
            <li>
              <p>The user express the will to be logged in.</p>
            </li>
            <li>
              <p>RAJE shows athe authorization modal.</p>
            </li>
            <li>
              <p>The user eccept authorization requirements.</p>
            </li>
            <li>
              <p>Github send the URL callback containing the code.</p>
            </li>
            <li>
              <p>RAJE extract the code and request the token.</p>
            </li>
            <li>
              <p>Github send the token in return.</p>
            </li>
            <li>
              <p>RAJE stores the token for next requests.</p>
            </li>
          </ol>
          <p>When the token is stored, every future requests (such as <em>create a repository</em> or <em>push a commit</em>) are instantly served, as we discussed before, with the variable <code>client</code>​, that is created with in input the token stored.</p>
          <p>When a new article is opened, a local folder is created with the document and all the needed assets. When the user wants to push changes and the repository does not exists, it needs to be created with all needed folders and files.</p>
          <p>Every time a push is requested we needs the SHA of the HTML file to update it and, if no repositories are founded RAJE needs to create it. Inside the client variable we can find the method <code>.me()</code>​ which returns an instance of the logged user. The me object has inside all allowed operations to users, and among them, the creation of a new repository. With the method <code>client.me().repo({},callback)</code>​ in our aid, a new repository is created, the first parameter is an object that contains properties like name, description and other less importantinformation.</p>
          <p>Once the repository is created we need to push also the assets, which are Javascript scripts, CSS style files and fonts​ (required by <a href="http://fontawesome.io/icons/">FontAwesome</a>). The current versione of RAJE needs to synchronize these files one after another (synchronous paradigm).</p>
          <p>Those two are the most important examples of integration with the big API of Github, but they give us the proof of what it can be possible to do.</p>
        </section>
        <section id="section31">
          <h1>Communication beetwen processes</h1>
          <p>Electron needs to ran with two processes: Main and Renderer. Main allow to use node.js syntax and manages the software behaviour, instead the Renderer one can be imported inside the HTML document, as like happens with RAJE.</p>
          <p>Rendered process is stored inside the <em>raje.js script</em>, that is concatenated with <a href="http://gulpjs.com/">gulp.js</a>. Said that, there are a lot of behaviours triggered by the Renderer process and executed by the Main, such as the one which is triggered when user wants to close the editor, when changes are not saved yet. To know that changes are unsaved there are some steps to explain. First, when the editor is opened, the entire body of the editable document is saved in a global variable inside the Renderer process. When the event <em>input</em> is triggered (it happens when some kind of input has been added in the editor), the system check if the saved body is different from the current body, and if they are it means that something has changed, and the <strong>editor state is set to changed</strong>.</p>
          <p>At this point the Renderer need to send this information to the Main process, to handle unexpected quit without saving changes. We need to instantiate the <em>ipcRenderer</em> module in the Renderer process, to handle and make requests destinated to the Main process. I set a function to do that, setEditState.</p>
          <pre><code>function setEditState() {ipcRenderer.send('setEditState', edit_state)
}</code><br /></pre>
          <p>It send the edit_state variable (that is a boolean) directly to the Main process, to be stored there. Right now we need to do the specular thing inside the Main process, but with the mainProcess module:</p>
          <pre><code>ipcMain.on('setEditState', (event, state) =&gt; {edit_state = state
})</code><br /></pre>
          <p>The event parameter inside the callback bring with it a lot of information about the trigger event, instead the state variable is what is passed from the Renderer process, i.e. the boolean that describe the state.</p>
          <p>Thank to this now we do not need to ask, from the Main, to the Renderer in Synchronous way (which is not possible) to know if the document has been changed before, but instead we can inform the Main every time a change took place, using the asynchronous paradigm.</p>
          <p>In the other way, there are some cases which need to communicate from Main to Process. The entire menu is created and setted up by the Main, and the behaviour behind the <em>editor mode</em> and <em>preview mode</em> buttons needto change the visualization of the Renderer one.</p>
          <p>In this case we use the webContent object in this way to communicate with the Renderer.</p>
          <pre><code>{label: 'Editor mode',click() {mainWindow.webContents.send('setEditorMode')}
},
{label: 'Preview mode',click() {mainWindow.webContents.send('setPreviewMode')}
},</code>​</pre>
          <p>And inside the Renderer process we have something like this to set the way how the editor will display the article.</p>
          <pre><code>ipcRenderer.on('setPreviewMode', (event) =&gt; {$(rash_inline_selector).setNotEditable()
})ipcRenderer.on('setEditorMode', (event) =&gt; {$(rash_inline_selector).setEditable()
})</code><br /></pre>
          <p>These above are examples of asynchronous communications, but for example when the user wants to add a image inside the article, the communication needs to be Synchronous. That is because first the editor save the file, then thefile can be displayed with the <em>img</em> element.</p>
          <p>The message is sent with a sync function, passing some informations about the file.</p>
          <pre><code>function sendWriteFigure(file) {ipcRenderer.sendSync('writeFigureSync', { 'name': file.name, 'path': file.path })
}<br /></code>​</pre>
          <p>In the Main process is pretty similar as the asynchronous behaviour, the only difference is when it need to send back the result to let know, at the sender process, that it finished its job.</p>
          <pre><code>ipcMain.on('writeFigureSync', (event, image) =&gt; {storage.getRecentArticles((err, recentArticles) =&gt; {fsUtils.writeFigureSync(recentArticles[recentArticles.length - 1], image, (err) =&gt; {if (err) throw errevent.returnValue = true})})
})<br /></code></pre>
In this case I send only a boolean in return, it notify to the renderer ​​that it can stop the blocking behavior, and resume from the last util instruction. In this case the last one is the one that creates the img element.        </section>
      </section>
      <section id="section24">
        <h1>Web-based technologies</h1>
        <p>As mentioned before, RAJE in built on Electron, which uses web technologies as Javascript and CSS to give at client-side behaviours and styles. First, the splash activity is only a html file with its own Javascript and CSS, rendered by the Main process. The editor itself is the HTML file stored inside the article folder. When it is viewed by a browser (Chromium in our case) it has <strong>rash.js</strong> script that built, into the RASH schema, the document. With the addition of raje.js a RASH document can be turned into a editable document with toolbar and other elements.</p>
        <p>For this reason, the core of this editor is not the software itself, but insted is the script imported, but the software gives some important wiring behaviors (FS and Github APIs).</p>
        <p>By the way, if the editor is inside the document stored as a script, why we do not use a normal web browser to edit? If someone try to open the file with a normal browser, he can view only a normal RASH file, because the editor behaviour will be shown and added only if the document is opened with RAJE. In other words, this is very useful to send read-only documents or show it with <a href="https://rawgit.com/">rawgit</a>. </p>
        <p>Here, in this section, I will explain everything about the "client side" editor, describing the raje.js script, contenteditable element and the issues jumped out using it.</p>
        <section id="section25">
          <h1>Raje.js: the core script</h1>
          <p>All the RAJE project flow around the raje.js script. It is built concatenating more scripts with gulp.js.</p>
          <p>Gulp is a toolkit that helps to automate tasks during development, and i used it to write raje.js when one of the inner scripts change. I created a task called <strong>watch</strong> that listens for saved changes, to build upthe output.</p>
          <p>Raje.js is made up of eight different files:</p>
          <ol>
            <li>
              <p>init.js</p>
            </li>
            <li>
              <p>caret.js</p>
            </li>
            <li>
              <p>const.js</p>
            </li>
            <li>
              <p>raje.js</p>
            </li>
            <li>
              <p>shortcuts.js</p>
            </li>
            <li>
              <p>toolbar.js</p>
            </li>
            <li>
              <p>derash.js</p>
            </li>
            <li>
              <p>rendered.js</p>
            </li>
          </ol>
          <p><strong>Init.js</strong> is the initialization script, it initializes the variables (like bodyContent or edit_state),extends JQuery object adding more new functions, handle the creation of figures and call the <code>$(document).ready()</code>function to set up the editor. Two important functions added to the JQuery object are: <em>setEditable</em> and <em>setNotEditable</em>, both act on the document editability. Very important is what happen to the sections: them are detached from the body and after attached to the <em>editor section</em> (i.e. the section with conteeditable attribute sets to true, i will explain its behaviour in the next section).</p>
          <p>The second script, that is <strong>caret.js</strong>, provides some utility methods about the caret and its position. Here we can find functions to check if the caret is inside some elements (e.g. if is inside the editor), or to create a selection that wraps entirely the node where the caret is. All the methods here are based on rangy.</p>
          <p>Sometimes i felt the need to use some constants to store numbers and string called multiple times. Those are wrapped inside the <strong>const script</strong>, in order to aware of <a href="http://sahandsaba.com/nine-anti-patterns-every-programmer-should-be-aware-of-with-examples.html#magic-numbers-and-strings">magic numbers anti-pattern</a>.</p>
          <p>Then we find <strong>raje.js</strong>, that is a set of actions to add elements directly onto the body. More of them uses the contenteditable APIs (see <em>undo</em> and <em>redo</em>) or the method <code>document.execCommand('insertHTML')</code>​that add a HTML string to the caret (as shown in figure right below). All <em>figure elements</em> and <em>crossref</em>are intended as classes, where a new element is a new object​. There are also methods to add sections of any kind, from normals to specials. </p>
          <pre><code>insertCodeBlock: function () {document.execCommand("insertHTML", false,'&lt;pre&gt;&lt;code&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;')
}</code>​</pre>
          <p>All shortcuts are stored in <strong>shortcuts.js</strong> script. All shortcuts are binded inside an init function called when the document is ready. Those are all implemented using the Mousetrap module, and needed to trigger a different behaviour from the normal one. Over that the enter key press event, may triggers different behaviour based on where the caret is (e.g. when user press enter inside a figure, he wants to add a new paragraph next to the figure, so he can write down a new text line).</p>
          <p>I wrapped every graphical elements, that will be added, inside <strong>toolbar.js</strong>. Here there are some variables which contain HTML strings that need to be added after. Among them there is the toolbar and all other modals, each with its own method to show it.</p>
          <p>Because the rendered document is different from the stored one, and <em>rash.js</em> deals with transformation beetwen the stored and rendered article, the editor needed some kind of mechanism that do the specular thing, in otherwords <strong>derash.js</strong>. This comes in aid when we save the article, because it creates and beautify the HTML string that is the file. When it creates the string, is minified, for this reason I created a function that mantains the multi line property and tabulation.</p>
          <p>At least <strong>rendered.js</strong> contains everything to handle communication with the Main process.</p>
          <p>Next, always with gulp.js, I will build raje.js also with all client-side modules (e.g. rangy and Mousetrap).</p>
        </section>
        <section id="section29">
          <h1>Contenteditable and issues with different browsers</h1>
          <p>When the document is ready all sections are detached from the body, and a new section is added instead (using the following code shown after).</p>
          <pre><code>&lt;section id="rashEditor" class="cgen editgen container mousetrap" contenteditable="true"&gt;&lt;/section&gt;</code>​ ​​</pre>
          <p>This mean that the entire body is inside this new <code>section#rashEditor</code>​, which grants editability thanksto the attribute <a href="https://www.w3.org/TR/2008/WD-html5-20080610/editing.html#contenteditable0">contenteditable</a> setted as true.​</p>
          <p>Contenteditable is an attribute, which can be true or false. If this section has contenteditable set to true, itis <strong>editable</strong>. This means that text can be added directly inside it, and it comes with some powerfulAPIs which give us important manageable skills (such as <q>transform selection into bold text</q> or <q>add new line paragraph</q>).</p>
          <p>This technology is very powerful, but have a so many exploits and, as the <strong>browser war</strong> shown us, every one decided to implement every function in his mind. For instance, after pressing the enter key, Internet Explorer will add a <code>&lt;p&gt;</code> element, Chrome will insert a <code>&lt;p&gt;</code> or <code>&lt;div&gt;</code>​ depending of the situation and finally Firefox will attach a <code>&lt;div&gt;</code>.</p>
          <p>This is only one of the issues jumped out during the development. A RASH article needs a specific set of element which comprends <em>strong</em> and <em>em</em>, but all browsers (without counting on IE) handle <em>bold</em>and <em>italic</em> instead. For this reason, inside the derash script, I added a function that convert a <em>bold </em>into <em>strong</em>.</p>
          <p>In the first instance, RASH should not be a software, but a simple script that could be imported directly as script, granting users to edit and save directly using a common browser. Then, according to the impossibility of use FileWriterAPI from all browsers, I choose to use a technology that allowed that. Right now raje.js works on Chromium, because that everything inside the raje core is intended for it.<br /></p>
          <p>All issues listed above are based on the one idea that I always need to use contenteditable because it implements also undo and redo behaviours. Becuase if i broke the contenteditable changes buffer (e.g. if I used JQuery to add directly a strong element), I will not be able anymore to know the order of changes to revert or do it again. On the Internet I have not find anything that would aid me, neither the APIs to access the undo buffer.</p>
          <p>Another important problem (and well documented on Github) is about the need to insert a sibling element. This went out when I was developing for Chrome and Firefox, so I found a common solution for both. In particular if the user wants to add a new section below the current one (a sibling one) when he is in this situation, where the caret is at the end of the paragraph.</p>
          <pre><code>&lt;section&gt;&lt;h1&gt;heading&lt;/h1&gt;&lt;p&gt;&lt;br/&gt;[caret]&lt;/p&gt;&lt;/section&gt;</code></pre>
          <p>Now, we probally want to add a new section after the current one, not inside. To do that we need to move the caret right at the end, because adding custom HTML need to call the method <code>execCommand("insertHTML", false, string)</code>​,and it will add the passed string where the caret is positioned. There is a function to do that and this is it <code>caret.moveAfterNode(node)</code>​.</p>
          <p>Here is where the problem comes out, not if you are using Firefox. For Chrome users (and RAJE indeed), this will move the caret at the end of the element, not outside but inside instead.</p>
          <pre><code>&lt;section&gt;&lt;h1&gt;heading&lt;/h1&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;[caret]&lt;/section&gt; //Chrome&lt;section&gt;&lt;h1&gt;heading&lt;/h1&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;&lt;/section&gt;[caret] //Firefox</code></pre>
          <p>​​With Chrome, after that, attaching the new section, will not add a sibling but a child instead. After few researches online, i foud out a special character: the <em>Zero Space character</em> i.e. <code>"&amp;#8203"​</code>​. ​ Addingthis after the current section, will be possible move the caret outside</p>
          <pre><code>&lt;section&gt;&lt;h1&gt;heading&lt;/h1&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;&lt;/section&gt;[caret]&amp;#8203</code>​</pre>
          <p>The only one thing remained here is to sanitize the current section's parent element, and remove all plain text thatis not wrapped in elements.</p>
          <p>That was the contenteditable and some examples of what can be the compatibility issues.</p>
        </section>
      </section>
      <section id="section36">
        <h1>Modules</h1>
        <p>Inside this section I will describe the third-part modules and packages that I used to easy up the usage of particular packages. Rangy is the most used one which comprends also two of its submodules, another one is Mousetrap that I used to handle the keyboard shortcuts.</p>
        <section id="section37">
          <h1>Rangy</h1>
        </section>
        <p><a href="https://github.com/timdown/rangy">@TimDown's rangy</a> is very popular, and it has also a active community (obviusly leaded by his founder Tim Down), on <a href="http://stackoverflow.com/search?q=rangy">StackOverflow</a> is a question of an enormus quantity of answers about contenteditable and selection management.</p>
        <p>Every browser implements a <a href="https://www.w3.org/TR/selection-api/#selection-interface">naïve selection interface</a>, and for a wider spectrum of methods, I personally think that rangy grants a lot of useful operations. In a particular way, I used that to know where the caret is when is needed to know, or the caret position inside its parent. It can also allow to move the caret to start or the end of an element.</p>
        <figure id="figure_10">
        </figure>
        <p>Otherwise I imported also a submodule, that is <em>rangy-selectionsaverestore</em>. <em>It can save the current caret position to be restored afte</em>r. E.g. when the user wants to add an image inside the article, after clicking the button, a modal is shown. Is here where the editor needs to save the current selection, because next he probably change the focus to a button, a textbox or directly with a single click in anywhere else position. When he chose file and it is saved, RAJE will restore the selection to move the caret where it was before and then add the new image element.</p>
        <p>The other subpackage is <em>rangy-textrange</em>, and can allows to move the caret ahead or behind of some characters. This behaviour is used to exit from inline elements. From inside a code element spaces are allowed, instead if youpress enter you will exit from it (and the caret will be moved by a character to right).</p>
        <section id="section38">
          <h1>Mousetrap and shortcuts</h1>
          <p>All the shortcuts are attached directly to the <code>section#rashEditor</code>​, because it have the <em>mousetrap </em>class, which is the one recognized by <a href="https://craig.is/killing/mice">Mousetrap</a>. This script is really easy yo use, is only about to connect somehow a character or a sequence of them.</p>
          <p>As shown in <a href="#figure_11"> </a> everythig is referred to a <em style="font-size: 12pt;">Mousetrap class</em>, and only the function bind is called. The signature means that it accepts a string (that is the sequence to trigger the event) and a callback called when the event is triggered.</p>
          <p>I used the same functions of the <em>Mousetrap objec</em>t to bind <strong>ctrl+b</strong> or <strong>cmd+b </strong>(the plus indicates that the two buttons need to be pressed at the same time) to handle the bold behaviour, handledin another script.</p>
          <pre><code>Mousetrap.bind('mod+b', function (event) {rashEditor.insertBold();return false;
});<br /></code></pre>
          <figure id="figure_11">
            <p><img src="img/mousetrap.png" alt="mousetrap.png" /></p>
            <figcaption>​Mousetrap bind function.</figcaption>
          </figure>
        </section>
      </section>
      <section id="section67">
        <h1>The deploy phase</h1>
        <p>When RAJE was ready for the first release, and I looked up for some tutorials to deploy the application. First of all I changed the entire structure of the application in <a href="#figure_12"> </a>​. The business core is moved inside the new app folder, with his own <em style="font-size: 12pt;">package.json</em> with all modules needed by the software itself. There is another <em style="font-size: 12pt;">package.json</em>. It is used to create the distributions forthe differents Operating Systems. In <a href="#figure_12"> </a>​ we can find build and dist folders. Dist is where the distributions will be stored, build instead contains few relevant build assets like icons (in every needed format).</p>
        <figure id="figure_12">
          <p><img src="img/structure.png" alt="structure.png" /></p>
          <figcaption>​New structure ready to deploy.</figcaption>
        </figure>
        <p>Inside the node_modules folder in the root, which is the development one, there are <em>electron-packager</em> and<em>electron-prebuilt</em> packages. Inside the development <em>package.json</em> we can find out the deploy scripts <code>"dist": "electron-packager ./app --all --out=./dist --overwrite"</code>​.</p>
        <p>According with this <a href="http://electron.rocks/electron-builder-explained/">article</a>, wrote on Electron ROCKS, <em>electron-packager</em> is a module that allows developers to package a software in more distributions for theOSs. For Unix systems is very simply. In particular way for MacOSx, which is the one that I used to develop, and Linux (this one needs the author written in the following schema: <code>Name Surname &lt;email&gt;</code>​ else willnot be executed). Windows is another thing, it need <a href="https://www.winehq.org/">Wine</a> and <a href="http://www.mono-project.com/">Mono libraries</a> (i.e.the open source counterpart of <a href="https://msdn.microsoft.com/en-us/library/ms973806.aspx#commnetlibs_topic1">.NET libraries</a>) installed inside the developer machine​. Now is allowed package executables only by typing the line <code>npm run dist</code>​.​</p>
      </section>
    </section>
    <section id="section43">
      <h1>Evaluation</h1>
      <p>Now, after the description of what RAJE is and how it is implemented, the last step is about testing the software to highlight critical issues and usability. The test survey is made with <a href="https://esurv.org/">eSurv.org</a>, findable <a href="https://eSurv.org?s=MJOLJJ_362fcb37">here</a>. This test is a DUT, i.e. Discount Usability Test. These kind of tests are made involving only few people: according to <a href="#bib16"> </a>, it is possible to find up to 80% of the main bugs involving only 3-5 people. The test has been prepared and has been made available online with eSurv.org, which is a tool that allows one to prepare complex survey easily, and it helps to recover and export results in xcell format. The test is a task driven test, i.e. a list of tasks are submitted to testers in order to fill a questionnaire with feedbacks. Feedbacks and form results are elaborated to reach the SUS index <a href="#bib16"> </a>. In results I show the results and the list of feedbacks received. The last question is about ask to testers advices and suggestions to expand the expand and fix the test for next usages.</p>
      <section id="section77">
        <p>Before start with the text, there are two prerequisites to be satisfied:</p>
        <ol>
          <li>
            <p>The RAJE executable must be downloaded and unzipped.</p>
          </li>
          <li>
            <p>The tester needs a Github account.</p>
          </li>
        </ol>
        <p>Once the requirements are satisfied, testers are redirected to the background form.</p>
      </section>
      <section id="section78">
        <h1>Profiling<br /></h1>
        <p>The test is organized with 3 researchers of the deparment of computer science and engineering at Bologna University, in line with the DUT principles. To each are submitted the same assertion categorised as expertise with: </p>
        <ol>
          <li>
            <p>Formats (e.g. DOC(X), ODT...)</p>
          </li>
          <li>
            <p>Word processors and HTML-based editors</p>
          </li>
          <li>
            <p>Research articles writing</p>
          </li>
          <li>
            <p>Control version systems</p>
          </li>
        </ol>
        <p>In total are 17 assertion, with the following format: "I have strong experience with DOC(X) files", needs to be answered with: Strongly Agree, Agree, Neutral, Disagree and Strongly Disagree. With this answers is possible to create profiles of the testers' background, which are used before to generate the results with the SUS answers. In order to complete the testers' background, one of them has Linux and two of them have MacOSX.</p>
      </section>
      <section id="section76">
        <h1>Tasks</h1>
        <p>In order to capture the usability the first task is to create <a href="http://gianmarco.spinaci.web.cs.unibo.it/rajetest_01_03_17.pdf">this PDF document</a> using RAJE. To obtain this document I followed the normal RASH workflow. I created the test document using RAJE, and with ROCS I converted the output document in TeX with the Springer LNCS style. The TeX document is then compiled in PDF. The second task aims to evaluate the integration beetwen RAJE and Github, with commit and push of the repository.</p>
        <p>Inside the document of the first task there is the whole set of elements and actions that a user can execute. In the abstract section there are some few text elements and a list. In the next sections there are tables, figures and formulas. The file also contains a footnote and a bibliography.</p>
        <p>The last task need testers to be logged in with Github. Then they have to push the created document, with the comment. When the article is saved online as a repository, testers have to navigate to the RawGit link and save it inside the document. After that the output folder must be compressed into a archive and send to my email, in order to evaluate the HTML given in output.</p>
      </section>
      <section id="section79">
        <h1>Results</h1>
        <p>The last two pages of the survey are the final questionnaire and for feedback given by the users. A task-based test is very useful to extrapolate quantitative measures about usability of the tool. Usability is described usingthe final questionnaire which is the SUS (System Usability Scale), i.e. a reliable and valid measure of perceived usability. The SUS is a 10 item questionnaire with 5 response options <a href="#bib17"> </a>​. It give a final number (the SUS index) which can be higher or lower than 68, and it is not percentage points, but an absolute number. A SUS score above a 68 would be considered above average and anything below 68 is below average. </p>
        <p>Instead, user feedback are four open answers. Answers are used in order to explain particular aspects caught by testers. With a syntactical analysis of the answers in order. Next I report the positive and negative feedback written by testers.</p>
        <section id="section80">
          <h1>System Usability Scale</h1>
          <p>Before describe the mode I used to find out the SUS score, I must remind that the figure on which the test is made is made up of 3 people, all kind of statistics on this population are not completely trustworthy.</p>
          <p>In order to extract the SUS score, I used a script written in R which calculates the score and give in output a plot about the usability. The final scores are in <a href="#figure_23"> </a>​. The figure shows that usability is 64.58, and learnability is 87.5. Usability is little lower than the average value, it means that RAJE usability is little bad. Instead learnability is pretty high. RAJE is very easy to use when user know how it works, it indicates that RAJE has high entry barriers.</p>
          <p>Crossing the values with users background trends can be find out. In <a href="#figure_24"> </a>​, <a href="#figure_24"> </a>​, <a href="#figure_25">Figure 25</a>, <a href="#figure_26"> </a> the SUS answers are crossed with experience of users with different formats, editors, version control systems and their experience in writing articles in order to show trends. Is very important to say that with only a small tester population is not possible to have any kind of statistic relevance. </p>
          <p>The learnability is proportional to the experience score. It means that a user which has an high degree of experiece with the asked formats, learn faster the tool usage, same as usability. Instead the "experience with editors score" shows that learnability is inverse to the degree of experience. It means that RAJE is pretty different from other editors, but is in line with experience that testers have on writing articles. As already said, all these measures are only theoretical, but the figure is very small to find out any real relevance.</p>
          <figure id="figure_24">
            <p><img src="img/susplot.png" alt="img/susplot.png" /></p>
            <figcaption>​Experience with formats score</figcaption>
          </figure>
          <figure id="figure_24">
            <p><img src="img/editore.png" alt="img/editore.png" /></p>
            <figcaption>​Experience with editors score.</figcaption>
          </figure>
          <figure id="figure_25">
            <p><img src="img/article.png" alt="img/article.png" /></p>
            <figcaption>​Experience of writing articles score.</figcaption>
          </figure>
          <figure id="figure_26">
            <p><img src="img/vcs.png" alt="img/vcs.png" /></p>
            <figcaption>​Experience with version control systems score.</figcaption>
          </figure>
​​​        </section>
        <section id="section81">
          <h1>Feedback</h1>
        </section>
      </section>
      <p>The users noticed few problems about usability and interface arrangement. All of the are agree upon the difficulty for finding the cross-reference button, and the tooltip shown on click is not much intuitive, it show "cross-ref". Also the button to log in with Github is hard to find. The edit of metadata (title, authors' names, affiliations, keywords, etc.) is difficult, and sometimes the caret disappear, and the focus can be lost. They found out that user can break well-formed structure, maybe inserting tables directly inside heading elements. Another needed feature is the possibility of convert an element into another, e.g. a text line can be converted into a list or a heading. This feature must be implemented soon. They noticed also some minor interface issues such as some similar toolbar icons or buttons without behaviour not disabled.</p>
      <p>Instead few aspects resulted very positive. The formula editor is very useful to create formulas also for whom do not have particular knowledgements. Also the buttons to insert tables and figures are wll inserted, easy to find with right icons. Also the toolbar is clear, graphical beautiful and has lightweight interface. The idea behind RAJE is to grant an interactive way for editing scientific articles and hiding all the technicalities, testers appreciate that.</p>
      <p>There is one more question after the fourth. It asks suggestions about extending or change in any way the test. Among them there are few interesting ideas. One is to plan the test also with other editors in order to perform a comparison, and use a real reasearch paper as test. Moreover also a hint about background questions came out: ask the expertice that the tester has with the RASH format.</p>
      <p>Personally I tested the project with a substantial document, i.e. this thesis. This test is very useful, and it helped me to find other hidden bugs, and increment the todo list. The whole set of bugs found in currently is "fix phase".</p>
    </section>
    <section id="section44">
      <h1>Conclusion and future developments</h1>
      <p>In this thesis I talked about how the Semantic Web community and few publishers, are starting to talk about HTML submissions. It is thought as solution for the problems of the PDF format described above. The advantages that HTML bring with it are easiness to be understanded by machines and the interactiveness granted by browsers. PDF files and HTML documents are easily created with visual editors and word processors. Most of them are WYSIWYG, that allow authors to editate directly the output. </p>
      <p>HTML wraps a huge amount of elements which can have ambiguity. Two elements can be different, but visualised as same. RASH fix this problem. It is a subset of 32 HTML elements, which grants that every element is univocal. Another streght of RASH is its framework. Validation, visualization and conversion are all actions that RASH framework can do. But it needs a tool to semplify the creation of a RASH file, hiding all the technical facts about the markup structure. RAJE will be placed inside the RASH framework, in order to cover this need. RAJE is a HTML-based WYSIWYG editor, with generates RASH well-formed documents.</p>
      <p>I described the most popular and used HTML-based editors and word processors, and then I discussed the functionalities and the development process in order to create RAJE, with JavaScript libraries, CSS styles and HTML files, and deploy the software packages.</p>
      <p>In addition of fixing bugs, some new features are needed to be added. The most interesting feature are the annotations, that will be integrated using <a href="https://hypothes.is/">hypothes.is</a>. I also noticed the necessity of a table of content, to navigate in a better way long documents. I also thought to expand RAJE to allow chairs to create conferences and manage peer reviewing directly with RAJE, or its hypotetical web site. These are just few way in how we can next expand RAJE.</p>
    </section>
    <section role="doc-bibliography" id="bibreflist">
      <h1>References</h1>
      <ol>
        <li id="bib1" role="doc-biblioentry">
          <p>Using PDF files. (2009) <a href="http://www.siamcomm.com/website-design/using-pdf-files-pros-and-cons/">http://www.siamcomm.com/website-design/using-pdf-files-pros-and-cons/</a><br /></p>
        </li>
        <li id="bib2" role="doc-biblioentry">
          <p>Peroni S. (2017). RASH: Research Articles in Simplified HTML<a href="https://rawgit.com/essepuntato/rash/master/documentation/index.html">https://rawgit.com/essepuntato/rash/master/documentation/index.html</a></p>
        </li>
        <li id="bib5" role="doc-biblioentry">
          <p>PDF history. <a href="https://it.wikipedia.org/wiki/Portable_Document_Format">https://it.wikipedia.org/wiki/Portable_Document_Format</a><br /></p>
        </li>
        <li id="bib6" role="doc-biblioentry">
          <p>Knowles S. How did the PDF become so popular? <a href="https://www.pdfpro.co/blog/2015/how-did-the-pdf-become-so-popular">https://www.pdfpro.co/blog/2015/how-did-the-pdf-become-so-popular</a><br /></p>
        </li>
        <li id="bib7" role="doc-biblioentry">
          <p>Rubano V. L’(IN)ACCESSIBILITÀ DEGLI ARTICOLI SCIENTIFICI SUL WEB E L’USO DI RASH E EPUB. <a href="http://amslaurea.unibo.it/12281/">http://amslaurea.unibo.it/12281/</a><br /></p>
        </li>
        <li id="bib8" role="doc-biblioentry">
          <p>Carpenter T. Is It Time for Scholarly Journal Publishers to Begin Distributing Articles Using EPUB 3? <a href="https://scholarlykitchen.sspnet.org/2013/03/19/is-it-time-for-scholarly-journal-publishers-to-begin-distributing-articles-using-epub-3/">https://scholarlykitchen.sspnet.org/2013/03/19/is-it-time-for-scholarly-journal-publishers-to-begin-distributing-articles-using-epub-3/</a><br /></p>
        </li>
        <li id="bib9" role="doc-biblioentry">
          <p>Ferrara D. EPUB versus PDF -The Pros and Cons for E-Publishing. <a href="http://webdesign.about.com/od/epub/a/epub-versus-pdf.htm">http://webdesign.about.com/od/epub/a/epub-versus-pdf.htm</a><br /></p>
        </li>
        <li id="bib10" role="doc-biblioentry">
          <p>What is WYSIWYG and How does it work? <a href="https://www.aspedia.net/faq/what-wysiwyg-and-how-does-it-work">https://www.aspedia.net/faq/what-wysiwyg-and-how-does-it-work</a><br /></p>
        </li>
        <li id="bib11" role="doc-biblioentry">
          <p>Why should I use Authorea to write my papers? <a href="http://www.astrobetter.com/blog/2015/07/13/why-should-i-use-authorea-to-write-my-papers/">http://www.astrobetter.com/blog/2015/07/13/why-should-i-use-authorea-to-write-my-papers/</a><br /></p>
        </li>
        <li id="bib12" role="doc-biblioentry">
          <p>Mott N. Fidus Writer is a collaborative writing tool custom-built for academia. <a href="https://pando.com/2013/04/24/fidus-writer-is-a-collaborative-writing-tool-custom-built-for-academia/">https://pando.com/2013/04/24/fidus-writer-is-a-collaborative-writing-tool-custom-built-for-academia/</a><br /></p>
        </li>
        <li id="bib13" role="doc-biblioentry">
          <p>Fidus Writer, how it works. <a href="https://www.fiduswriter.org/how-it-works/">https://www.fiduswriter.org/how-it-works/</a><br /></p>
        </li>
        <li id="bib14" role="doc-biblioentry">
          <p>Aalbersberg I. PDF versus HTML — which do researchers prefer? <a href="https://www.elsevier.com/connect/pdf-versus-html-which-do-researchers-prefer">https://www.elsevier.com/connect/pdf-versus-html-which-do-researchers-prefer</a><br /></p>
        </li>
        <li id="bib15" role="doc-biblioentry">
          <p>Peroni S., Osborne F., Di Iorio A., Nuzzolese A., Poggi F., Vitali F. Research Articles in Simplified HTML: a Web-firstformat for HTML-based scholarly articles <a href="https://essepuntato.github.io/papers/rash-peerj2016.html">https://essepuntato.github.io/papers/rash-peerj2016.html</a></p>
        </li>
        <li id="bib16" role="doc-biblioentry">
          <p>Nielsen J. Discount Usability: 20 Years (2009) <a href="https://www.nngroup.com/articles/discount-usability-20-years/">https://www.nngroup.com/articles/discount-usability-20-years/</a><br /></p>
        </li>
        <li id="bib17" role="doc-biblioentry">
          <p>Sauro J. Measuring Usability with the System Usability Scale (SUS) (2011) <a href="https://measuringu.com/sus/">https://measuringu.com/sus/</a></p>
        </li>
        <li id="bib18" role="doc-biblioentry">
          <p>PubCSS: Formatting Academic Publications in HTML &amp; CSS (2015) <a href="http://thomaspark.co/2015/01/pubcss-formatting-academic-publications-in-html-css/">http://thomaspark.co/2015/01/pubcss-formatting-academic-publications-in-html-css/</a><br /></p>
        </li>
        <li id="bib19" role="doc-biblioentry">
          <p>HTML Submission Guide at 20<sup>th</sup> International Conference on Knowledge Engineering and Knowledge Management <a href="http://ekaw2016.cs.unibo.it/?q=html-submission-guide">http://ekaw2016.cs.unibo.it/?q=html-submission-guide</a><br /></p>
        </li>
      </ol>
    </section>
    <section role="doc-endnotes" id="fnlist">
      <section id="fn5" role="doc-endnote">
        <p>In real-time, without any compilation or interpretation.</p>
      </section>
      <section id="fn2" role="doc-endnote">
        <p>LaTeX Math Symbols <a href="http://web.ift.uib.no/Teori/KURS/WRK/TeX/symALL.html">http://web.ift.uib.no/Teori/KURS/WRK/TeX/symALL.html</a>.</p>
      </section>
      <section id="fn3" role="doc-endnote">
        <p>All kind of files with <em>.epub</em> extension.</p>
      </section>
      <section id="fn4" role="doc-endnote">
        <p>Developed by the <em>IDPF EPUB Working Group</em>, consisting of IDPF members and Invited Experts.</p>
      </section>
      <section id="fn6" role="doc-endnote">
        <p>Evaluation section show that RASH can be quickly learnt by researchers who are familiar with HTML<a href="#bib15"></a>​. </p>
      </section>
      <section id="fn1" role="doc-endnote">
        <p>FileWriter API compatibility with commercial browsers.</p>
      </section>
    </section>

</body>
</html>